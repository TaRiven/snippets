# PROFILE=-pg
CC=@CC@
CFLAGS=@CFLAGS@ @DEFS@ $(PROFILE)
LDFLAGS=@LDFLAGS@
OBJ=scoring.o dict.o search.o
LIB=-L. -lscrabble
RANLIB=@RANLIB@
AR=@AR@

all: search

search: search_main.o libscrabble.a
	$(CC) $(PROFILE) $(LDFLAGS) -o $@ search_main.o $(LIB)

dict: dict_main.o libscrabble.a
	$(CC) $(PROFILE) $(LDFLAGS) -o $@ dict_main.o $(LIB)

scoring: scoring_main.o libscrabble.a
	$(CC) $(PROFILE) $(LDFLAGS) -o $@ scoring_main.o $(LIB)

libscrabble.a: $(OBJ)
	$(AR) rc $@ $(OBJ)
	$(RANLIB) libscrabble.a

dict_main.o: dict.c
	$(CC) $(CFLAGS) $(PROFILE) -DDICT_MAIN -c -o $@ dict.c

search_main.o: search.c
	$(CC) $(CFLAGS) $(PROFILE) -DSEARCH_MAIN -c -o $@ search.c

scoring_main.o: scoring.c
	$(CC) $(CFLAGS) $(PROFILE) -DSCORING_MAIN -c -o $@ scoring.c

clean:
	rm -f libscrabble.a dict_main.o search_main.o scoring_main.o \
		$(OBJ) dict search scoring
