# Copyright (c) 1998  Dustin Sallings
# $Id: Makefile.in,v 1.5 1998/01/31 00:10:51 dustin Exp $

SHELL=/bin/sh
CC=@CC@
LINT=lint
INCLUDES=-Ireadconfig -I.
DEFINES=
CFLAGS=@CFLAGS@ $(INCLUDES) $(DEFINES)
LIBS=@LIBS@ readconfig/readconfig.a
LDFLAGS=$(LIBS)

.SUFFIXES: .c .o .l .a .ln
OBJS=main.o sockets.o cluster.o
SRCS=main.c sockets.c cluster.c
LINTS=main.ln sockets.ln cluster.ln
EXES=redirect
AUTOJUNK=config.h config.status config.cache config.log Makefile

# Lint stuff
LINT=@LINT@
LINTFLAGS=$(INCLUDES) -DVERSION=\"$(VERSION)\" -v -x -u
LINTS=main.ln sockets.ln cluster.ln

JUNK=$(OBJS) $(EXES) $(LINTS)

.SUFFIXES: .c .o .l .a .ln

redirect: readconfig $(OBJS)
	$(CC) $(CFLAGS) -o $@ $(OBJS) $(LDFLAGS)

readconfig: readconfig/readconfig.a

readconfig/readconfig.a:
	cd @top_srcdir@/readconfig && make && cd @top_srcdir@

lint: $(LINTS)
	$(LINT) $(LINTFLAGS) $(LINTS)

.c.ln: $<
	$(LINT) $(LINTFLAGS) -c $<

clean:
	rm -f $(JUNK) core

ultrabrite: clean
	rm -f $(AUTOJUNK)
